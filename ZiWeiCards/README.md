# [ZiWeiCards — 紫微牌卡線上抽牌](https://onmymindziweicards.cc/ZiWeiCards/)

純前端實作的紫微牌卡隨機抽牌應用,開啟瀏覽器即可體驗多種牌陣與正／倒牌解讀。

## ✨ 功能特色

### 🎴 多元牌陣選擇

- **擲筊**:傳統擲筊占卜,顯示聖杯/笑杯/蓋杯結果
- **一張牌陣**:單張生年牌快速解讀
- **二張牌陣**:1 主星牌 + 1 輔星牌組合
- **三張基礎牌陣**:1 主星 + 1 輔星 + 1 生年牌完整解讀
- **對宮牌陣**:2 主星 + 2 輔星 + 1 生年牌,探索對宮關係
- **三方四正牌陣**:4 主星 + 4 輔星 + 1 生年牌,全方位分析
- **十二宮位大牌陣**:13 主星 + 12 輔星 + 1 生年牌,完整命盤解讀

### 🃏 三種牌卡系統

- **主星牌** (39 種):紫微、天機、太陽、武曲、天同、廉貞、天府、太陰、貪狼、巨門、天相、天梁、七殺、破軍、空宮,及 24 種雙星組合
- **輔星牌** (19 種):四化(化祿、化權、化科、化忌)、六吉星、六煞星等
- **生年牌** (12 種):長生十二神(長生、沐浴、冠帶、臨官、帝旺、衰、病、死、墓、絕、胎、養)

每種牌卡皆包含正牌與倒牌,共 **140 張牌卡**。

### 🎯 完整互動功能

- **問題輸入**:記錄占卜問題,儲存牌面時一併保存
- **抽牌動畫**:搖晃 → 翻牌的流暢動畫效果
- **洗牌預覽**:顯示背面牌卡的洗牌動畫
- **儲存牌面**:將當前牌陣與問題儲存為圖片
- **時間記錄**:自動記錄每次抽牌/擲筊的精確時間

### 🔒 安全性設計

- **內容安全政策 (CSP)**:防止 XSS 攻擊
- **子資源完整性 (SRI)**:驗證外部資源完整性
- **無後端依賴**:所有運算皆在瀏覽器端完成,保護隱私

### 📱 響應式設計

- 支援桌面、平板、手機等多種裝置
- 自適應排版,確保最佳閱讀體驗

## 🛠️ 技術實作

### 核心技術

- **純前端**:HTML5 + CSS3 + Vanilla JavaScript
- **無建構流程**:開啟 `index.html` 即可使用
- **模組化設計**:清晰的函式分離與職責劃分

### 關鍵演算法

- **Fisher–Yates 洗牌**:確保隨機性的洗牌演算法
- **不重複抽牌**:同一牌名不會同時出現正牌與倒牌
- **動態宮位排列**:十二宮位隨機起始位置

### 外部資源

- **字型**:Google Fonts (Noto Sans TC, Noto Serif TC)
- **截圖工具**:html2canvas (用於儲存牌面功能)
- **統計追蹤**:Google Analytics + Counter API

## 📁 專案結構

```
ZiWeiCards/
├─ index.html            # 主入口 (含 GTM、GA、CSP 設定)
├─ style.css             # 樣式定義 (含 RWD、動畫)
├─ script.js             # 抽牌邏輯 (含牌陣渲染、動畫控制)
├─ LICENSE               # Apache-2.0 授權
├─ README.md             # 本檔:專案說明
└─ images/               # 牌卡與圖示素材
     ├─ 1Main/           # 主星牌圖片 (39 種 × 2 = 78 張)
     ├─ 2Support/        # 輔星牌圖片 (19 種 × 2 = 38 張)
     ├─ 3Life/           # 生年牌圖片 (12 種 × 2 = 24 張)
     ├─ 4blocks/         # 擲筊圖片
     ├─ Common/          # 背面牌與共用素材
     ├─ Logo/            # 網站 Logo 與 Favicon
     └─ Spreads/         # 牌陣示意圖
```

## 🚀 使用方式

1. **開啟網頁**:直接開啟 `index.html` 或造訪 [線上版本](https://onmymindziweicards.cc/ZiWeiCards/)
2. **輸入問題**:在「輸入問題」欄位輸入您的占卜問題 (選填)
3. **選擇牌陣**:從下拉選單選擇適合的牌陣類型
4. **抽牌/擲筊**:點擊「抽牌」或「擲筊」按鈕
5. **查看結果**:觀看動畫並查看抽到的牌卡
6. **儲存牌面**:點擊「儲存牌面」將結果下載為圖片

## 📊 牌陣說明

| 牌陣名稱       | 主星牌 | 輔星牌 | 生年牌 | 適用情境           |
| -------------- | ------ | ------ | ------ | ------------------ |
| 擲筊           | -      | -      | -      | 是非問題、神明指示 |
| 一張牌陣       | 0      | 0      | 1      | 快速運勢指引       |
| 二張牌陣       | 1      | 1      | 0      | 簡單問題解答       |
| 三張基礎牌陣   | 1      | 1      | 1      | 日常占卜           |
| 對宮牌陣       | 2      | 2      | 1      | 關係探索           |
| 三方四正牌陣   | 4      | 4      | 1      | 全面分析           |
| 十二宮位大牌陣 | 13     | 12     | 1      | 完整命盤解讀       |

## 📄 授權

本專案採用 **Apache License 2.0**,詳見 [LICENSE](LICENSE)。

## 👤 作者

**沐心紫微**  
Instagram: [@onmymind.fortune](https://www.instagram.com/onmymind.fortune/)

## 🔗 相關連結

- [線上使用](https://onmymindziweicards.cc/ZiWeiCards/)

---

_最後更新:2025/12/09_
